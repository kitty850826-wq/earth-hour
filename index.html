<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTE åŒè‡´é›»å­ - é—œç‡ˆä¸€å°æ™‚æ‰¿è«¾å¡è£½ä½œ</title>
    <style>
        body { font-family: "Microsoft JhengHei", sans-serif; text-align: center; background: #222; color: #fff; padding: 20px; }
        .box { max-width: 600px; margin: auto; background: #333; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        input { width: 80%; padding: 15px; font-size: 18px; border: none; border-radius: 10px; margin-bottom: 20px; text-align: center; }
        button { background: #2ecc71; color: white; border: none; padding: 15px 30px; font-size: 18px; border-radius: 10px; cursor: pointer; transition: 0.3s; }
        button:hover { background: #27ae60; }
        canvas { max-width: 100%; height: auto; margin-top: 20px; border-radius: 10px; display: none; border: 2px solid #555; }
        #downloadBtn { background: #3498db; margin-top: 20px; display: none; text-decoration: none; padding: 15px 30px; color: white; border-radius: 10px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="box">
        <h2>ğŸŒ TTE é—œç‡ˆä¸€å°æ™‚</h2>
        <p>è¼¸å…¥å§“åï¼Œç”¢å‡ºæ‚¨çš„å°ˆå±¬æ‰¿è«¾åœ–å¡</p>
        
        <input type="text" id="nameInput" placeholder="åœ¨æ­¤è¼¸å…¥å§“å (ä¾‹å¦‚ï¼šé™³å¤§æ˜)" maxlength="10">
        <br>
        <button onclick="generate()">âœ¨ ç”¢ç”Ÿæ‰¿è«¾å¡</button>
        <br>
        <canvas id="canvas"></canvas>
        <br>
        <a id="downloadBtn" href="#">ğŸ’¾ ä¸‹è¼‰åœ–ç‰‡ä¸¦åˆ†äº«</a>
    </div>

    <script>
        function generate() {
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            const name = document.getElementById('nameInput').value;
            
            if (!name) { alert('è«‹è¼¸å…¥å§“åå–”ï¼'); return; }

            const img = new Image();
            img.crossOrigin = "anonymous"; 
            img.src = 'bg.jpg?' + new Date().getTime(); // é˜²æ­¢è®€å–èˆŠåœ–å¿«å–

            img.onload = function() {
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0);

                // è¨­å®šæ–‡å­—æ¨£å¼ (é…åˆæ‚¨åœ–ç‰‡çš„è¨­è¨ˆ)
                ctx.font = "bold 60px 'Microsoft JhengHei', Arial"; 
                ctx.fillStyle = "#1a1a1a"; // æ·±è‰²æ–‡å­—ï¼Œé…åˆç™½è‰²èƒŒæ™¯
                ctx.textAlign = "left";

                // ã€é—œéµï¼šå¾®èª¿ä½ç½®ã€‘
                // æ ¹æ“šæ‚¨æä¾›çš„åœ–ï¼Œã€Œæˆ‘æ˜¯ã€å¾Œé¢å¤§ç´„æ˜¯ x=230, y=490 çš„ä½ç½®
                ctx.fillText(name, 230, 490); 

                canvas.style.display = "block";
                
                // ç”¢å‡ºä¸‹è¼‰é€£çµ
                const downloadBtn = document.getElementById('downloadBtn');
                downloadBtn.href = canvas.toDataURL('image/png');
                downloadBtn.style.display = "inline-block";
                downloadBtn.download = `TTE_EarthHour_${name}.png`;
            };

            img.onerror = function() {
                alert("æ‰¾ä¸åˆ°åº•åœ– bg.jpgï¼Œè«‹ç¢ºèªæª”æ¡ˆå·²ç¶“ä¸Šå‚³åˆ° GitHubã€‚");
            };
        }
    </script>
</body>
</html>
